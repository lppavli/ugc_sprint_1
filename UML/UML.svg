<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="686px" preserveAspectRatio="none" style="width:987px;height:686px;background:#FFFFFF;" version="1.1" viewBox="0 0 987 686" width="987px" zoomAndPan="magnify"><defs/><g><!--MD5=[0ba5ee7700168656dc1b457c6fe9fdac]
entity Client--><g id="elem_Client"><ellipse cx="277.6234" cy="14" fill="#F1F1F1" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M277.6234,22 L277.6234,49 M264.6234,30 L290.6234,30 M277.6234,49 L264.6234,64 M277.6234,49 L290.6234,64 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="256.1234" y="78.4951">Client</text></g><!--MD5=[0e36f5196c35de7f53403f35ff29d766]
entity AdminService--><g id="elem_AdminService"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#FFA500;stroke-width:0.5;" width="147" x="834.1234" y="328.5"/><rect fill="#F1F1F1" height="10" style="stroke:#FFA500;stroke-width:0.5;" width="15" x="961.1234" y="333.5"/><rect fill="#F1F1F1" height="2" style="stroke:#FFA500;stroke-width:0.5;" width="4" x="959.1234" y="335.5"/><rect fill="#F1F1F1" height="2" style="stroke:#FFA500;stroke-width:0.5;" width="4" x="959.1234" y="339.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="849.1234" y="361.4951">Administration</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="849.1234" y="377.792">Service</text></g><!--MD5=[b125130d822c619ce4c69a6f00b540b7]
entity ETL_PG_ES--><g id="elem_ETL_PG_ES"><rect fill="#F1F1F1" height="78.8906" rx="2.5" ry="2.5" style="stroke:#0000FF;stroke-width:0.5;" width="107" x="233.1234" y="468.5"/><rect fill="#F1F1F1" height="10" style="stroke:#0000FF;stroke-width:0.5;" width="15" x="320.1234" y="473.5"/><rect fill="#F1F1F1" height="2" style="stroke:#0000FF;stroke-width:0.5;" width="4" x="318.1234" y="475.5"/><rect fill="#F1F1F1" height="2" style="stroke:#0000FF;stroke-width:0.5;" width="4" x="318.1234" y="479.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="248.1234" y="501.4951">ETL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="248.1234" y="517.792">Postgres</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="248.1234" y="534.0889">to Elastic</text></g><!--MD5=[847a6cbdbc29bb65c939fa88d1bf17c4]
entity Movies--><g id="elem_Movies"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="96.1234" y="173.5"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="169.1234" y="178.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="167.1234" y="180.5"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="167.1234" y="184.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="111.1234" y="206.4951">Movies</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="111.1234" y="222.792">Service</text></g><!--MD5=[39222abbbfd087a4fdab60e627dc976f]
entity Auth--><g id="elem_Auth"><rect fill="#F1F1F1" height="62.5938" rx="2.5" ry="2.5" style="stroke:#008000;stroke-width:0.5;" width="93" x="366.1234" y="173.5"/><rect fill="#F1F1F1" height="10" style="stroke:#008000;stroke-width:0.5;" width="15" x="439.1234" y="178.5"/><rect fill="#F1F1F1" height="2" style="stroke:#008000;stroke-width:0.5;" width="4" x="437.1234" y="180.5"/><rect fill="#F1F1F1" height="2" style="stroke:#008000;stroke-width:0.5;" width="4" x="437.1234" y="184.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="381.1234" y="206.4951">Auth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="381.1234" y="222.792">Service</text></g><!--MD5=[7fbd20eab0f047d95d8cf961cd333b40]
entity Postgres--><g id="elem_Postgres"><path d="M540.1234,347.5 C540.1234,337.5 581.6234,337.5 581.6234,337.5 C581.6234,337.5 623.1234,337.5 623.1234,347.5 L623.1234,372.7969 C623.1234,382.7969 581.6234,382.7969 581.6234,382.7969 C581.6234,382.7969 540.1234,382.7969 540.1234,372.7969 L540.1234,347.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M540.1234,347.5 C540.1234,357.5 581.6234,357.5 581.6234,357.5 C581.6234,357.5 623.1234,357.5 623.1234,347.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="550.1234" y="374.4951">Postgres</text></g><!--MD5=[f96d690baea4a0823d36c98ba0c3a2b4]
entity Redis--><g id="elem_Redis"><path d="M257.1234,347.5 C257.1234,337.5 286.6234,337.5 286.6234,337.5 C286.6234,337.5 316.1234,337.5 316.1234,347.5 L316.1234,372.7969 C316.1234,382.7969 286.6234,382.7969 286.6234,382.7969 C286.6234,382.7969 257.1234,382.7969 257.1234,372.7969 L257.1234,347.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M257.1234,347.5 C257.1234,357.5 286.6234,357.5 286.6234,357.5 C286.6234,357.5 316.1234,357.5 316.1234,347.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="267.1234" y="374.4951">Redis</text></g><!--MD5=[986caa7dfae4089018c43fa9fb7180a3]
entity Elastic--><g id="elem_Elastic"><path d="M128.1234,634.5 C128.1234,624.5 161.6234,624.5 161.6234,624.5 C161.6234,624.5 195.1234,624.5 195.1234,634.5 L195.1234,659.7969 C195.1234,669.7969 161.6234,669.7969 161.6234,669.7969 C161.6234,669.7969 128.1234,669.7969 128.1234,659.7969 L128.1234,634.5 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M128.1234,634.5 C128.1234,644.5 161.6234,644.5 161.6234,644.5 C161.6234,644.5 195.1234,644.5 195.1234,634.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="138.1234" y="661.4951">Elastic</text></g><!--MD5=[b764131a8b155fba864cfde0b4b850e6]
link Client to Auth--><g id="link_Client_Auth"><path d="M299.3134,70.126 C322.0684,97.011 357.9734,139.432 383.2564,169.303 " fill="none" id="Client-to-Auth" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="386.5954,173.248,383.8336,163.7943,383.3649,169.4317,377.7275,168.9631,386.5954,173.248" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="362.6234" y="124.5669">Аутентификация / Регистрация</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="440.1234" y="139.6997">клиента</text></g><!--MD5=[ecb059eaf87411f4623fb3ecfcd4a949]
link Auth to Client--><g id="link_Auth_Client"><path d="M459.2184,196.747 C521.6334,185.067 620.4194,158.5 582.6234,111.5 C547.6904,68.06 372.0704,51.176 304.3304,46.215 " fill="none" id="Auth-to-Client" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="299.2604,45.851,307.9517,50.4837,304.2476,46.2081,308.5231,42.5041,299.2604,45.851" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="591.6234" y="132.0669">Access и Refresh токены</text></g><!--MD5=[2eddb433fd0d11d86b5e2eaf850fb2cf]
link Auth to Postgres--><g id="link_Auth_Postgres"><path d="M459.3344,214.995 C490.4414,223.314 529.9834,238.745 554.6234,266.5 C570.8004,284.722 577.3094,312.153 579.9154,332.415 " fill="none" id="Auth-to-Postgres" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="580.4974,337.402,583.4266,327.9988,579.9175,332.4357,575.4806,328.9267,580.4974,337.402" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="572.6234" y="287.0669">Сохранение клиента в базу</text></g><!--MD5=[8db03ac3b0c79874ee0e9b2ed6fd36f2]
link Auth to Redis--><g id="link_Auth_Redis"><path d="M397.1884,236.756 C386.9994,255.566 372.6104,279.567 356.6234,298.5 C345.8234,311.291 332.2154,323.694 319.8754,333.905 " fill="none" id="Auth-to-Redis" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="315.7454,337.282,325.2447,334.6814,319.6161,334.1169,320.1805,328.4883,315.7454,337.282" style="stroke:#008000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="380.6234" y="279.5669">Сохранение 'протухших'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="409.1234" y="294.6997">Refresh токенов</text></g><!--MD5=[a272ed80789ad952808ab65d42f16228]
link Client to Movies--><g id="link_Client_Movies"><path d="M255.7314,47.045 C200.4214,53.971 57.4828,75.115 29.6234,111.5 C6,142.353 51.1688,169.419 91.2247,186.173 " fill="none" id="Client-to-Movies" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="96.0792,188.165,89.2713,181.048,91.4535,186.267,86.2344,188.4492,96.0792,188.165" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="30.6234" y="132.0669">Запрос контента</text></g><!--MD5=[f8333a076ff47fc772790bb5ae5b4a2f]
reverse link Client to Movies--><g id="link_Client_Movies"><path d="M251.6874,59.428 C232.3974,71.535 206.4384,90.068 188.6234,111.5 C173.3754,129.844 161.5554,154.094 153.7164,173.163 " fill="none" id="Client-backto-Movies" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="255.9424,56.793,246.1848,58.1308,251.6915,59.4255,250.3968,64.9322,255.9424,56.793" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="189.6234" y="132.0669">Получение контента</text></g><!--MD5=[e4ebc53f53b8d61a13b40a459c373c3f]
link Movies to Auth--><g id="link_Movies_Auth"><path d="M189.3454,205 C237.2074,205 311.4324,205 361.0034,205 " fill="none" id="Movies-to-Auth" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="366.0214,205,357.0214,201,361.0214,205,357.0214,209,366.0214,205" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="220.1234" y="183.0669">Проверка токена</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="207.6234" y="198.1997">и прав пользователя</text></g><!--MD5=[4cfa1f35a2c490e27c549f15b0c0b342]
link Movies to Redis--><g id="link_Movies_Redis"><path d="M138.6364,236.627 C137.7454,256.086 139.8264,280.844 152.6234,298.5 C176.0144,330.771 220.7234,346.183 252.0424,353.296 " fill="none" id="Movies-to-Redis" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="256.9494,354.368,249.0106,348.5391,252.0646,353.3008,247.303,356.3548,256.9494,354.368" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="153.6234" y="287.0669">Сохранение / проверка кэша</text></g><!--MD5=[9ec0a4fc6dc7a0f7fa0beb978589ca70]
link Movies to Elastic--><g id="link_Movies_Elastic"><path d="M136.5564,236.657 C134.9414,246.18 133.4244,256.739 132.6234,266.5 C131.4594,280.675 132.0314,284.29 132.6234,298.5 C137.6254,418.572 152.3074,561.377 158.6494,619.4615 " fill="none" id="Movies-to-Elastic" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="159.2004,624.4862,162.1953,615.1037,158.6552,619.516,154.243,615.976,159.2004,624.4862" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="142.6234" y="434.5669">Запрос данных</text></g><!--MD5=[d34b49617316fb8bb32d04079bdef019]
reverse link Postgres to ETL_PG_ES--><g id="link_Postgres_ETL_PG_ES"><path d="M542.8484,385.36 C516.6984,401.346 481.1584,422.225 448.6234,438.5 C413.2574,456.191 372.2164,473.512 340.2934,486.311 " fill="none" id="Postgres-backto-ETL_PG_ES" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="547.2904,382.636,537.5268,383.9289,543.0275,385.2489,541.7074,390.7496,547.2904,382.636" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="478.6234" y="434.5669">Запрос новых / обновлённых данных</text></g><!--MD5=[eadbc9bfc13266035fcaaa44ecc22336]
reverse link Redis to ETL_PG_ES--><g id="link_Redis_ETL_PG_ES"><path d="M286.6234,387.77 C286.6234,410.342 286.6234,442.936 286.6234,468.342 " fill="none" id="Redis-backto-ETL_PG_ES" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="286.6234,382.543,282.6234,391.543,286.6234,387.543,290.6234,391.543,286.6234,382.543" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="287.6234" y="434.5669">Сохранение состояния</text></g><!--MD5=[493f19df1171c3c7f52f373e3779f93a]
link ETL_PG_ES to Elastic--><g id="link_ETL_PG_ES_Elastic"><path d="M251.4714,547.527 C230.1254,570.9215 203.4784,600.1265 184.7674,620.6345 " fill="none" id="ETL_PG_ES-to-Elastic" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="181.3684,624.3593,190.3898,620.4079,184.7389,620.6661,184.4807,615.0151,181.3684,624.3593" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="225.6234" y="590.5669">Загрузка новых / обновлённых данных</text></g><!--MD5=[0d80d3a26fa4064c4fca917cb0158742]
reverse link Postgres to AdminService--><g id="link_Postgres_AdminService"><path d="M628.3294,360 C682.0434,360 770.9164,360 833.9724,360 " fill="none" id="Postgres-backto-AdminService" style="stroke:#FFA500;stroke-width:1.0;"/><polygon fill="#FFA500" points="623.2424,360,632.2424,364,628.2424,360,632.2424,356,623.2424,360" style="stroke:#FFA500;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="641.6234" y="353.0669">Загрузка контента в базу</text></g><!--MD5=[88d3edcd7fc76e7137c0e6dce12c46d5]
@startuml
skinparam componentStyle uml2
actor Client #line:black
component "Administration\nService" as AdminService #line:orange
component "ETL\nPostgres\nto Elastic" as ETL_PG_ES #line:blue
component "Movies\nService" as Movies
component "Auth\nService" as Auth #line:green

database Postgres
database Redis
database Elastic


Client -[#green]> Auth: "Аутентификация / Регистрация\nклиента"
Auth -[#green]-> Postgres: "Сохранение клиента в базу"
Auth -[#green]> Client: "Access и Refresh токены"
Auth -[#green]> Redis: "Сохранение 'протухших'\nRefresh токенов"

Client - -> Movies: "Запрос контента"
Client <- - Movies: "Получение контента"
Movies -> Auth: "Проверка токена\nи прав пользователя"
Movies - -> Redis: "Сохранение / проверка кэша"
Movies - -> Elastic: "Запрос данных"

Postgres <-[#blue]- ETL_PG_ES: "Запрос новых / обновлённых данных"
Redis <-[#blue]- ETL_PG_ES : "Сохранение состояния"
ETL_PG_ES -[#blue]-> Elastic: "Загрузка новых / обновлённых данных"

Postgres <-[#orange] AdminService: "Загрузка контента в базу"
@enduml

PlantUML version 1.2022.13beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>